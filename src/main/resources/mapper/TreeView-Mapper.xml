<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.mapper.TreeViewMapper">

<!--    treeview에 들어갈 부서 select-->
    <select id="selectSearchOrganization" parameterType="OrganizationCommand" resultType="OrganizationCommand">
        select dept_id deptId,
             dept_name deptName,
             dept_sup_id deptSupId,
             dept_leader_id deptLeaderId,
             level

        from dept
        start with DEPT_SUP_ID = 'd000'
        connect by prior dept_id = dept_sup_id
        order by dept_id
    </select>

<!--    treeview에 들어갈 사원 select -->
    <select id="selectSearchEmp" parameterType="OrganizationCommand" resultType="OrganizationCommand">
        select a.emp_id 			deptId,
               a.emp_name 			deptName,
               a.dept_id 			deptSupId,
               b.code_name	        position,
               c.attend_st_name     empState
        from emp a
                 left outer join attend_st c
                                 on c.attend_st_id=a.attend_st_id
           , code b
        where b.code_group_id = 'G01'
          and a.code_id = b.code_id
        order by b.code_id
    </select>


<!--    전자결재 폼에 들어갈 데이터 -->
        <select id="selectSearchForm" parameterType="FormVO" resultType="FormVO">
            select FORM_ID
                 ,FORM_NAME
                 ,FORM_SUP_ID
                 ,level

            from APPROVAL_FORM
            start with FORM_SUP_ID is null
            connect by prior FORM_ID = FORM_SUP_ID
            order by FORM_ID
        </select>
</mapper>